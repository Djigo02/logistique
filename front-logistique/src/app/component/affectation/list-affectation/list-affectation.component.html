<!--app-content open-->
<div class="main-content app-content mt-5 pt-9">
  <div class="side-app">
    <!-- CONTAINER -->
    <div class="main-container container-fluid">
      <!-- ROW-2 -->
      <div class="row">
        <div class="col-12 col-sm-12">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title mb-0">Affectation des campus</h3>
            </div>
            <div class="card-body pt-4">
              <div class="grid-margin">
                <div class="">
                  <div class="panel panel-primary">
                    <div class="tab-menu-heading border-0 p-0">
                      <div class="tabs-menu1">
                        <!-- Tabs -->
                        <ul class="nav panel-tabs product-sale">
                          <li>

                          <li style="cursor:pointer">
                            <a
                              (click)="goToAdd()"
                              class="text-primary"
                            >Affecter un materiel</a
                            >
                          </li>
                        </ul>
                      </div>
                    </div>
                    <div class="panel-body tabs-menu-body border-0 pt-0">
                      <div class="tab-content">
                        <div class="tab-pane active" id="tab5">
                          <div class="table-responsive">
                            <table
                              id="data-table"
                              class="table table-bordered text-nowrap mb-0"
                            >
                              <thead class="border-top">
                              <tr>
                                <th
                                  class="bg-transparent border-bottom-0"
                                  style="width: 5%"
                                >
                                  Affectant
                                </th>
                                <th class="bg-transparent border-bottom-0">
                                  Code du materiel
                                </th>
                                <th class="bg-transparent border-bottom-0">
                                  Description du materiel
                                </th>
                                <th class="bg-transparent border-bottom-0">
                                  Quantité
                                </th>
                                <th class="bg-transparent border-bottom-0">
                                  Date d'affectation
                                </th>
                                <th
                                  class="bg-transparent border-bottom-0"
                                  style="width: 5%"
                                >
                                  Action
                                </th>
                              </tr>
                              </thead>
                              <tbody>
                              <tr *ngFor="let affect of affectation" class="border-bottom">
                                <td  class="text-center">
                                  <div class="mt-0 mt-sm-2 d-block">
                                    <h6 class="mb-0 fs-14 fw-semibold">
                                      {{affect.concerne.nomCampus}}
                                    </h6>
                                  </div>
                                </td>
                                <td>
                                  <div class="d-flex">
                                    <div class="ms-3 mt-0 mt-sm-2 d-block">
                                      <h6 class="mb-0 fs-14 fw-semibold">
                                        {{affect.materiel.codeMateriel}}
                                      </h6>
                                    </div>
                                  </div>
                                </td>
                                <td>
                                  <div class="d-flex">
                                    <div class="mt-0 mt-sm-3 d-block">
                                      <h6 class="mb-0 fs-14 fw-semibold">
                                        {{affect.materiel.description}}
                                      </h6>
                                    </div>
                                  </div>
                                </td>
                                <td>
                                    <span class="mt-sm-2 d-block"
                                    > {{affect.quantite}}</span>
                                </td>
                                <td>
                                  <span class="fw-semibold mt-sm-2 d-block">{{affect.created_at  | date:'dd/MM/yyyy'}}</span>
                                </td>
                                <td>
                                  <div class="g-2">
                                    <a
                                      data-bs-toggle="modal" [attr.data-bs-target]="'#largemodal' + affect.id"
                                      class="btn text-primary btn-sm"
                                      data-bs-original-title="Edit"
                                    ><span class="fe fe-edit fs-14"></span
                                    ></a>
                                    <a

                                      class="btn text-danger btn-sm"
                                      data-bs-toggle="tooltip"
                                      data-bs-original-title="Delete"
                                    ><span
                                      class="fe fe-trash-2 fs-14"
                                    ></span
                                    ></a>
                                    <a
                                      class="btn text-info btn-sm"
                                      data-bs-toggle="tooltip"
                                      data-bs-original-title="forward"
                                      title="Transferer"
                                      (click)="goToTransfert(affect.id)"
                                    ><span
                                      class="fe fe-fast-forward"
                                    ></span
                                    ></a>
                                  </div>
                                </td>
                              </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- ROW-2 END -->
      <!--      Modal -->
      <div *ngFor="let aff of affectation">
        <div class="modal fade" [attr.id]="'largemodal' + aff.id" tabindex="-1" role="dialog">
          <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title">Modifier l'affectaion</h5>
                <button class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">×</span>
                </button>
              </div>
              <div class="modal-body">
                <form (ngSubmit)="onSubmitForCampus()" >
                  <div class="card">
                    <div class="card-header">
                      <h3 class="card-title">Affecter un  materiel a un campus</h3>
                    </div>
                    <div class="card-body">
                      <div class="row">
                        <!-- Concerne -->
                        <div class="col-md-12">
                          <div class="form-group">
                            <label class="form-label">Campus <span class="text-red">*</span></label>
                            <select class="form-control" [(ngModel)]="affectation.concerne_id" name="concerne_id" required>
                              <option value="">Veuillez choisir le campus</option>
                              <option *ngFor="let camp of campus" [value]="camp.id">{{ camp.nomCampus }}</option>
                            </select>
                          </div>
                        </div>
                        <!-- Reference -->
                        <div class="col-sm-6 col-md-6">
                          <div class="form-group">
                            <label class="form-label">Quantite <span class="text-red">*</span></label>
                            <input type="text" class="form-control" [(ngModel)]="affectation.quantite" placeholder="Quantite" required  name="quantite"  />

                          </div>
                        </div>
                        <!-- Type materiel -->
                        <div class="col-md-12">
                          <div class="form-group">
                            <label class="form-label">Type Materiel <span class="text-red">*</span></label>
                            <select class="form-control form-select select2"  (change)="onTypeMaterielChange($event)" name="typeMateriel" >
                              <option selected>Veuillez choisir le Type Materiel</option>
                              <option *ngFor="let tm of typeMateriels " value="{{tm.id}}">{{tm.libelle}}</option>
                            </select>
                          </div>
                        </div>
                        <div class="col-md-12">
                          <div class="form-group">
                            <label class="form-label"> Materiel <span class="text-red">*</span></label>
                            <select class="form-control form-select select2" name="idMateriel" [(ngModel)]="affectation.idMateriel">
                              <option selected>Veuillez choisir le Materiel</option>
                              <option *ngFor="let mat of materiel"  value="{{mat.id}}" >{{mat.description}}</option>
                            </select>
                          </div>
                        </div>

                        <!-- Bouton Ajouter -->
                        <div class="form-footer mt-2">
                          <button type="submit" class="btn btn-primary">Enregistrer l'affectation</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
              <div class="modal-footer">
                <button class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                <button class="btn btn-primary">Sauvegarder</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!--    Fin Modal -->
      <!-- ROW-2 -->
      <div class="row">
        <div class="col-12 col-sm-12">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title mb-0">Affectation des salles</h3>
            </div>
            <div class="card-body pt-4">
              <div class="grid-margin">
                <div class="">
                  <div class="panel panel-primary">
                    <div class="tab-menu-heading border-0 p-0">
                      <div class="tabs-menu1">
                        <!-- Tabs -->
                        <ul class="nav panel-tabs product-sale">
                          <li>

                          <li style="cursor:pointer">
                            <a
                              (click)="goToAdd()"
                              class="text-primary"
                            >Affecter un materiel</a
                            >
                          </li>
                        </ul>
                      </div>
                    </div>
                    <div class="panel-body tabs-menu-body border-0 pt-0">
                      <div class="tab-content">
                        <div class="tab-pane active" id="tab5">
                          <div class="table-responsive">
                            <table
                              id="data-table"
                              class="table table-bordered text-nowrap mb-0"
                            >
                              <thead class="border-top">
                              <tr>
                                <th
                                  class="bg-transparent border-bottom-0"
                                  style="width: 5%"
                                >
                                  Affectant
                                </th>
                                <th class="bg-transparent border-bottom-0">
                                  Code du materiel
                                </th>
                                <th class="bg-transparent border-bottom-0">
                                  Description du materiel
                                </th>
                                <th class="bg-transparent border-bottom-0">
                                  Quantité
                                </th>
                                <th class="bg-transparent border-bottom-0">
                                  Date d'affectation
                                </th>
                                <th
                                  class="bg-transparent border-bottom-0"
                                  style="width: 5%"
                                >
                                  Action
                                </th>
                              </tr>
                              </thead>
                              <tbody>
                              <tr *ngFor="let affect of affectationS" class="border-bottom">
                                <td  class="text-center">
                                  <div class="mt-0 mt-sm-2 d-block">
                                    <h6 class="mb-0 fs-14 fw-semibold">
                                      {{affect.concerne.nomSalle}}
                                    </h6>
                                  </div>
                                </td>
                                <td>
                                  <div class="d-flex">
                                    <div class="ms-3 mt-0 mt-sm-2 d-block">
                                      <h6 class="mb-0 fs-14 fw-semibold">
                                        {{affect.materiel.codeMateriel}}
                                      </h6>
                                    </div>
                                  </div>
                                </td>
                                <td>
                                  <div class="d-flex">
                                    <div class="mt-0 mt-sm-3 d-block">
                                      <h6 class="mb-0 fs-14 fw-semibold">
                                        {{affect.materiel.description}}
                                      </h6>
                                    </div>
                                  </div>
                                </td>
                                <td>
                                    <span class="mt-sm-2 d-block"
                                    > {{affect.quantite}}</span>
                                </td>
                                <td>
                                  <span class="fw-semibold mt-sm-2 d-block">{{affect.created_at  | date:'dd/MM/yyyy'}}</span>
                                </td>
                                <td>
                                  <div class="g-2">
                                    <a

                                      class="btn text-primary btn-sm"
                                      data-bs-toggle="tooltip"
                                      data-bs-original-title="Edit"
                                    ><span class="fe fe-edit fs-14"></span
                                    ></a>
                                    <a

                                      class="btn text-danger btn-sm"
                                      data-bs-toggle="tooltip"
                                      data-bs-original-title="Delete"
                                    ><span
                                      class="fe fe-trash-2 fs-14"
                                    ></span
                                    ></a>
                                  </div>
                                </td>
                              </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- ROW-2 END -->
      <!-- ROW-2 -->
      <div class="row">
        <div class="col-12 col-sm-12">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title mb-0">Affectation des utilisateurs</h3>
            </div>
            <div class="card-body pt-4">
              <div class="grid-margin">
                <div class="">
                  <div class="panel panel-primary">
                    <div class="tab-menu-heading border-0 p-0">
                      <div class="tabs-menu1">
                        <!-- Tabs -->
                        <ul class="nav panel-tabs product-sale">
                          <li>

                          <li style="cursor:pointer">
                            <a
                              (click)="goToAdd()"
                              class="text-primary"
                            >Affecter un materiel</a
                            >
                          </li>
                        </ul>
                      </div>
                    </div>
                    <div class="panel-body tabs-menu-body border-0 pt-0">
                      <div class="tab-content">
                        <div class="tab-pane active" id="tab5">
                          <div class="table-responsive">
                            <table
                              id="data-table"
                              class="table table-bordered text-nowrap mb-0"
                            >
                              <thead class="border-top">
                              <tr>
                                <th
                                  class="bg-transparent border-bottom-0"
                                  style="width: 5%"
                                >
                                  Affectant
                                </th>
                                <th class="bg-transparent border-bottom-0">
                                  Code du materiel
                                </th>
                                <th class="bg-transparent border-bottom-0">
                                  Description du materiel
                                </th>
                                <th class="bg-transparent border-bottom-0">
                                  Quantité
                                </th>
                                <th class="bg-transparent border-bottom-0">
                                  Date d'affectation
                                </th>
                                <th
                                  class="bg-transparent border-bottom-0"
                                  style="width: 5%"
                                >
                                  Action
                                </th>
                              </tr>
                              </thead>
                              <tbody>
                              <tr *ngFor="let affect of affectationU" class="border-bottom">
                                <td  class="text-center">
                                  <div class="mt-0 mt-sm-2 d-block">
                                    <h6 class="mb-0 fs-14 fw-semibold">
                                      {{affect.concerne.prenom}} {{affect.concerne.nom}}
                                    </h6>
                                  </div>
                                </td>
                                <td>
                                  <div class="d-flex">
                                    <div class="ms-3 mt-0 mt-sm-2 d-block">
                                      <h6 class="mb-0 fs-14 fw-semibold">
                                        {{affect.materiel.codeMateriel}}
                                      </h6>
                                    </div>
                                  </div>
                                </td>
                                <td>
                                  <div class="d-flex">
                                    <div class="mt-0 mt-sm-3 d-block">
                                      <h6 class="mb-0 fs-14 fw-semibold">
                                        {{affect.materiel.description}}
                                      </h6>
                                    </div>
                                  </div>
                                </td>
                                <td>
                                    <span class="mt-sm-2 d-block"
                                    > {{affect.quantite}}</span>
                                </td>
                                <td>
                                  <span class="fw-semibold mt-sm-2 d-block">{{affect.created_at  | date:'dd/MM/yyyy'}}</span>
                                </td>
                                <td>
                                  <div class="g-2">
                                    <a
                                      class="btn text-primary btn-sm"
                                      data-bs-toggle="tooltip"
                                      data-bs-original-title="Edit"
                                    ><span class="fe fe-edit fs-14"></span
                                    ></a>
                                    <a

                                      class="btn text-danger btn-sm"
                                      data-bs-toggle="tooltip"
                                      data-bs-original-title="Delete"
                                    ><span
                                      class="fe fe-trash-2 fs-14"
                                    ></span
                                    ></a>
                                  </div>
                                </td>
                              </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- ROW-2 END -->
    </div>
    <!-- CONTAINER END -->
  </div>
</div>
<!--app-content close-->
